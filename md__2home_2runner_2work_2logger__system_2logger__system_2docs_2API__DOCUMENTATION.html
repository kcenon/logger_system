<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Logger System: Logger System API Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Logger System<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">High-performance C++20 thread-safe logging system with asynchronous capabilities</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__2home_2runner_2work_2logger__system_2logger__system_2docs_2API__DOCUMENTATION.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Logger System API Documentation</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md134"></a> </p>
<h1><a class="anchor" id="autotoc_md135"></a>
Table of Contents</h1>
<ol type="1">
<li>Introduction</li>
<li>Quick Start</li>
<li>Core Components</li>
<li>Configuration</li>
<li>Advanced Features</li>
<li>Best Practices</li>
<li>Performance Optimization</li>
<li>Migration Guide</li>
<li>API Reference</li>
</ol>
<h1><a class="anchor" id="autotoc_md136"></a>
Introduction</h1>
<p>The Logger System is a high-performance, thread-safe logging library designed for modern C++20 applications. It provides flexible configuration, multiple output targets, and advanced features like asynchronous logging and batch processing.</p>
<h2><a class="anchor" id="autotoc_md137"></a>
Key Features</h2>
<ul>
<li><b>Thread-safe</b> logging with lock-free options</li>
<li><b>Multiple writers</b> (console, file, async, batch)</li>
<li><b>Flexible formatting</b> with customizable patterns</li>
<li><b>Performance optimized</b> with SSO and batch processing</li>
<li><b>Modular design</b> with optional dependencies</li>
<li><b>Comprehensive filtering</b> by level, category, and custom rules</li>
</ul>
<h1><a class="anchor" id="autotoc_md138"></a>
Quick Start</h1>
<h2><a class="anchor" id="autotoc_md139"></a>
Basic Usage</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;logger_system/logger.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    <span class="comment">// Create a simple logger</span></div>
<div class="line">    <span class="keyword">auto</span> logger = <a class="code hl_class" href="classlogger__module_1_1logger__builder.html">logger_module::logger_builder</a>()</div>
<div class="line">        .with_console_writer()</div>
<div class="line">        .<a class="code hl_function" href="classlogger__module_1_1logger__builder.html#a4ca65e7bb8757c08ece5d058cebc3baf">with_min_level</a>(logger_module::log_level::info)</div>
<div class="line">        .<a class="code hl_function" href="classlogger__module_1_1logger__builder.html#a19ea0ad54462dc54678d174312565266">build</a>();</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Log messages</span></div>
<div class="line">    logger-&gt;info(<span class="stringliteral">&quot;Application started&quot;</span>);</div>
<div class="line">    logger-&gt;debug(<span class="stringliteral">&quot;Debug information&quot;</span>, {{<span class="stringliteral">&quot;user&quot;</span>, <span class="stringliteral">&quot;john&quot;</span>}});</div>
<div class="line">    logger-&gt;error(<span class="stringliteral">&quot;An error occurred&quot;</span>, {{<span class="stringliteral">&quot;code&quot;</span>, 404}});</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aclasslogger__module_1_1logger__builder_html"><div class="ttname"><a href="classlogger__module_1_1logger__builder.html">logger_module::logger_builder</a></div><div class="ttdoc">Builder pattern for logger construction with validation.</div><div class="ttdef"><b>Definition</b> <a href="logger__builder_8h_source.html#l00107">logger_builder.h:107</a></div></div>
<div class="ttc" id="aclasslogger__module_1_1logger__builder_html_a19ea0ad54462dc54678d174312565266"><div class="ttname"><a href="classlogger__module_1_1logger__builder.html#a19ea0ad54462dc54678d174312565266">logger_module::logger_builder::build</a></div><div class="ttdeci">result&lt; std::unique_ptr&lt; logger &gt; &gt; build()</div><div class="ttdef"><b>Definition</b> <a href="logger__builder_8h_source.html#l00634">logger_builder.h:634</a></div></div>
<div class="ttc" id="aclasslogger__module_1_1logger__builder_html_a4ca65e7bb8757c08ece5d058cebc3baf"><div class="ttname"><a href="classlogger__module_1_1logger__builder.html#a4ca65e7bb8757c08ece5d058cebc3baf">logger_module::logger_builder::with_min_level</a></div><div class="ttdeci">logger_builder &amp; with_min_level(thread_module::log_level level)</div><div class="ttdef"><b>Definition</b> <a href="logger__builder_8h_source.html#l00207">logger_builder.h:207</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md140"></a>
File Logging</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;logger_system/logger.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;logger_system/writers/file_writer.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    <span class="keyword">auto</span> logger = <a class="code hl_class" href="classlogger__module_1_1logger__builder.html">logger_module::logger_builder</a>()</div>
<div class="line">        .with_file_writer(<span class="stringliteral">&quot;app.log&quot;</span>)</div>
<div class="line">        .with_rotation(10 * 1024 * 1024)  <span class="comment">// 10MB rotation</span></div>
<div class="line">        .with_max_files(5)                 <span class="comment">// Keep 5 backup files</span></div>
<div class="line">        .<a class="code hl_function" href="classlogger__module_1_1logger__builder.html#a19ea0ad54462dc54678d174312565266">build</a>();</div>
<div class="line">    </div>
<div class="line">    logger-&gt;info(<span class="stringliteral">&quot;Logging to file&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md141"></a>
Core Components</h1>
<h2><a class="anchor" id="autotoc_md142"></a>
Logger</h2>
<p>The main interface for logging messages. Thread-safe and supports multiple severity levels.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>logger {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="comment">// Log methods for different severity levels</span></div>
<div class="line">    <span class="keywordtype">void</span> trace(<span class="keyword">const</span> std::string&amp; message, <span class="keyword">const</span> fields_type&amp; fields = {});</div>
<div class="line">    <span class="keywordtype">void</span> debug(<span class="keyword">const</span> std::string&amp; message, <span class="keyword">const</span> fields_type&amp; fields = {});</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_enumvalue" href="namespacelogger__system.html#ad8e3c64f7744daa2d80e68c884e342d1acaf9b6b99962bf5c2264824231d7a40c">info</a>(<span class="keyword">const</span> std::string&amp; message, <span class="keyword">const</span> fields_type&amp; fields = {});</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_enumvalue" href="namespacethread__module.html#a5a2719d6d43f27e1e8e913fbfa5c9288a7b83d3f08fa392b79e3f553b585971cd">warning</a>(<span class="keyword">const</span> std::string&amp; message, <span class="keyword">const</span> fields_type&amp; fields = {});</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_enumvalue" href="namespacelogger__system.html#ad8e3c64f7744daa2d80e68c884e342d1acb5e100e5a9a3e7f6d1fd97512215282">error</a>(<span class="keyword">const</span> std::string&amp; message, <span class="keyword">const</span> fields_type&amp; fields = {});</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_enumvalue" href="namespacelogger__system.html#a7c770a6aeb351bbdeecfd4f6040ae4e7a7e85bcb66fb9a809d5ab4f62a8b8bea8">critical</a>(<span class="keyword">const</span> std::string&amp; message, <span class="keyword">const</span> fields_type&amp; fields = {});</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Generic log method</span></div>
<div class="line">    <span class="keywordtype">void</span> log(log_level level, <span class="keyword">const</span> std::string&amp; message, </div>
<div class="line">             <span class="keyword">const</span> fields_type&amp; fields = {});</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Structured logging</span></div>
<div class="line">    <span class="keywordtype">void</span> log_structured(<span class="keyword">const</span> log_entry&amp; entry);</div>
<div class="line">};</div>
<div class="ttc" id="anamespacelogger__system_html_a7c770a6aeb351bbdeecfd4f6040ae4e7a7e85bcb66fb9a809d5ab4f62a8b8bea8"><div class="ttname"><a href="namespacelogger__system.html#a7c770a6aeb351bbdeecfd4f6040ae4e7a7e85bcb66fb9a809d5ab4f62a8b8bea8">logger_system::health_status::critical</a></div><div class="ttdeci">@ critical</div></div>
<div class="ttc" id="anamespacelogger__system_html_ad8e3c64f7744daa2d80e68c884e342d1acaf9b6b99962bf5c2264824231d7a40c"><div class="ttname"><a href="namespacelogger__system.html#ad8e3c64f7744daa2d80e68c884e342d1acaf9b6b99962bf5c2264824231d7a40c">logger_system::log_level::info</a></div><div class="ttdeci">@ info</div></div>
<div class="ttc" id="anamespacelogger__system_html_ad8e3c64f7744daa2d80e68c884e342d1acb5e100e5a9a3e7f6d1fd97512215282"><div class="ttname"><a href="namespacelogger__system.html#ad8e3c64f7744daa2d80e68c884e342d1acb5e100e5a9a3e7f6d1fd97512215282">logger_system::log_level::error</a></div><div class="ttdeci">@ error</div></div>
<div class="ttc" id="anamespacethread__module_html_a5a2719d6d43f27e1e8e913fbfa5c9288a7b83d3f08fa392b79e3f553b585971cd"><div class="ttname"><a href="namespacethread__module.html#a5a2719d6d43f27e1e8e913fbfa5c9288a7b83d3f08fa392b79e3f553b585971cd">thread_module::log_level::warning</a></div><div class="ttdeci">@ warning</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md143"></a>
Writers</h2>
<p>Writers determine where log messages are output.</p>
<h3><a class="anchor" id="autotoc_md144"></a>
Console Writer</h3>
<div class="fragment"><div class="line"><span class="keyword">auto</span> writer = std::make_unique&lt;console_writer&gt;();</div>
<div class="line">writer-&gt;set_colored_output(<span class="keyword">true</span>);  <span class="comment">// Enable colored output</span></div>
<div class="line">logger-&gt;add_writer(std::move(writer));</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md145"></a>
File Writer</h3>
<div class="fragment"><div class="line"><span class="keyword">auto</span> writer = std::make_unique&lt;file_writer&gt;(<span class="stringliteral">&quot;app.log&quot;</span>);</div>
<div class="line">writer-&gt;set_rotation_size(10 * 1024 * 1024);  <span class="comment">// 10MB</span></div>
<div class="line">writer-&gt;set_max_files(5);</div>
<div class="line">logger-&gt;add_writer(std::move(writer));</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md146"></a>
Async Writer</h3>
<div class="fragment"><div class="line"><span class="keyword">auto</span> file_writer = std::make_unique&lt;file_writer&gt;(<span class="stringliteral">&quot;async.log&quot;</span>);</div>
<div class="line"><span class="keyword">auto</span> async_writer = std::make_unique&lt;async_writer&gt;(std::move(file_writer));</div>
<div class="line">async_writer-&gt;set_queue_size(10000);</div>
<div class="line">async_writer-&gt;set_flush_interval(std::chrono::seconds(1));</div>
<div class="line">logger-&gt;add_writer(std::move(async_writer));</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md147"></a>
Batch Writer</h3>
<div class="fragment"><div class="line"><span class="keyword">auto</span> file_writer = std::make_unique&lt;file_writer&gt;(<span class="stringliteral">&quot;batch.log&quot;</span>);</div>
<div class="line"><span class="keyword">auto</span> batch_writer = std::make_unique&lt;batch_writer&gt;(std::move(file_writer));</div>
<div class="line">batch_writer-&gt;set_batch_size(100);</div>
<div class="line">batch_writer-&gt;set_flush_interval(std::chrono::milliseconds(500));</div>
<div class="line">logger-&gt;add_writer(std::move(batch_writer));</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md148"></a>
Formatters</h2>
<p>Formatters control how log messages are displayed.</p>
<div class="fragment"><div class="line"><span class="comment">// Default formatter</span></div>
<div class="line"><span class="keyword">auto</span> formatter = std::make_unique&lt;default_formatter&gt;();</div>
<div class="line">formatter-&gt;set_pattern(<span class="stringliteral">&quot;[%time%] [%level%] %message%&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// JSON formatter</span></div>
<div class="line"><span class="keyword">auto</span> json_formatter = std::make_unique&lt;json_formatter&gt;();</div>
<div class="line">json_formatter-&gt;set_pretty_print(<span class="keyword">true</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Custom formatter</span></div>
<div class="line"><span class="keyword">class </span>custom_formatter : <span class="keyword">public</span> base_formatter {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    std::string format(<span class="keyword">const</span> log_entry&amp; entry)<span class="keyword"> override </span>{</div>
<div class="line">        <span class="comment">// Custom formatting logic</span></div>
<div class="line">        <span class="keywordflow">return</span> formatted_string;</div>
<div class="line">    }</div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md149"></a>
Filters</h2>
<p>Filters control which messages are logged.</p>
<div class="fragment"><div class="line"><span class="comment">// Level filter</span></div>
<div class="line"><span class="keyword">auto</span> level_filter = std::make_unique&lt;level_filter&gt;(log_level::warning);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Category filter</span></div>
<div class="line"><span class="keyword">auto</span> category_filter = std::make_unique&lt;category_filter&gt;();</div>
<div class="line">category_filter-&gt;add_allowed_category(<span class="stringliteral">&quot;network&quot;</span>);</div>
<div class="line">category_filter-&gt;add_allowed_category(<span class="stringliteral">&quot;database&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Custom filter</span></div>
<div class="line"><span class="keyword">class </span>custom_filter : <span class="keyword">public</span> base_filter {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keywordtype">bool</span> should_log(<span class="keyword">const</span> log_entry&amp; entry)<span class="keyword"> override </span>{</div>
<div class="line">        <span class="comment">// Custom filtering logic</span></div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">};</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md150"></a>
Configuration</h1>
<h2><a class="anchor" id="autotoc_md151"></a>
Logger Builder</h2>
<p>The recommended way to configure a logger:</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> logger = <a class="code hl_class" href="classlogger__module_1_1logger__builder.html">logger_module::logger_builder</a>()</div>
<div class="line">    <span class="comment">// Writers</span></div>
<div class="line">    .with_console_writer()</div>
<div class="line">    .with_file_writer(<span class="stringliteral">&quot;app.log&quot;</span>)</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Formatting</span></div>
<div class="line">    .with_pattern(<span class="stringliteral">&quot;[%time%] [%level%] [%thread%] %message%&quot;</span>)</div>
<div class="line">    .with_timestamp_format(<span class="stringliteral">&quot;%Y-%m-%d %H:%M:%S&quot;</span>)</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Filtering</span></div>
<div class="line">    .<a class="code hl_function" href="classlogger__module_1_1logger__builder.html#a4ca65e7bb8757c08ece5d058cebc3baf">with_min_level</a>(log_level::info)</div>
<div class="line">    .with_category_filter({<span class="stringliteral">&quot;network&quot;</span>, <span class="stringliteral">&quot;database&quot;</span>})</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Performance</span></div>
<div class="line">    .with_async_mode(<span class="keyword">true</span>)</div>
<div class="line">    .<a class="code hl_function" href="classlogger__module_1_1logger__builder.html#ace497899700799575eb0f19bba51ee4f">with_batch_writing</a>(<span class="keyword">true</span>)</div>
<div class="line">    .with_queue_size(10000)</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Build</span></div>
<div class="line">    .<a class="code hl_function" href="classlogger__module_1_1logger__builder.html#a19ea0ad54462dc54678d174312565266">build</a>();</div>
<div class="ttc" id="aclasslogger__module_1_1logger__builder_html_ace497899700799575eb0f19bba51ee4f"><div class="ttname"><a href="classlogger__module_1_1logger__builder.html#ace497899700799575eb0f19bba51ee4f">logger_module::logger_builder::with_batch_writing</a></div><div class="ttdeci">logger_builder &amp; with_batch_writing(bool enable=true)</div><div class="ttdoc">Enable batch writing for writers.</div><div class="ttdef"><b>Definition</b> <a href="logger__builder_8h_source.html#l00227">logger_builder.h:227</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md152"></a>
Configuration Templates</h2>
<p>Pre-configured templates for common use cases:</p>
<div class="fragment"><div class="line"><span class="comment">// Production configuration</span></div>
<div class="line"><span class="keyword">auto</span> logger = logger_builder()</div>
<div class="line">    .with_configuration_template(configuration_template::production)</div>
<div class="line">    .build();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Debug configuration</span></div>
<div class="line"><span class="keyword">auto</span> logger = logger_builder()</div>
<div class="line">    .with_configuration_template(configuration_template::debug)</div>
<div class="line">    .build();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// High-performance configuration</span></div>
<div class="line"><span class="keyword">auto</span> logger = logger_builder()</div>
<div class="line">    .with_configuration_template(configuration_template::high_performance)</div>
<div class="line">    .build();</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md153"></a>
Environment-based Configuration</h2>
<div class="fragment"><div class="line"><span class="keyword">auto</span> logger = logger_builder()</div>
<div class="line">    .with_environment_strategy(environment_strategy::auto_detect)</div>
<div class="line">    .build();</div>
<div class="line"><span class="comment">// Automatically configures based on LOG_ENV environment variable</span></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md154"></a>
Advanced Features</h1>
<h2><a class="anchor" id="autotoc_md155"></a>
Structured Logging</h2>
<div class="fragment"><div class="line"><span class="comment">// Using structured fields</span></div>
<div class="line">logger-&gt;info(<span class="stringliteral">&quot;User login&quot;</span>, {</div>
<div class="line">    {<span class="stringliteral">&quot;user_id&quot;</span>, 12345},</div>
<div class="line">    {<span class="stringliteral">&quot;ip_address&quot;</span>, <span class="stringliteral">&quot;192.168.1.1&quot;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;timestamp&quot;</span>, std::chrono::system_clock::now()},</div>
<div class="line">    {<span class="stringliteral">&quot;success&quot;</span>, <span class="keyword">true</span>}</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Using log_entry directly</span></div>
<div class="line">log_entry entry;</div>
<div class="line">entry.level = log_level::info;</div>
<div class="line">entry.message = <span class="stringliteral">&quot;Database query&quot;</span>;</div>
<div class="line">entry.fields[<span class="stringliteral">&quot;query&quot;</span>] = <span class="stringliteral">&quot;SELECT * FROM users&quot;</span>;</div>
<div class="line">entry.fields[<span class="stringliteral">&quot;duration_ms&quot;</span>] = 45;</div>
<div class="line">entry.fields[<span class="stringliteral">&quot;rows_returned&quot;</span>] = 100;</div>
<div class="line">logger-&gt;log_structured(entry);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md156"></a>
Contextual Logging</h2>
<div class="fragment"><div class="line"><span class="comment">// Set thread-local context</span></div>
<div class="line">logger-&gt;set_context(<span class="stringliteral">&quot;request_id&quot;</span>, <span class="stringliteral">&quot;abc-123&quot;</span>);</div>
<div class="line">logger-&gt;set_context(<span class="stringliteral">&quot;user_id&quot;</span>, <span class="stringliteral">&quot;user-456&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// All subsequent logs include context</span></div>
<div class="line">logger-&gt;info(<span class="stringliteral">&quot;Processing request&quot;</span>);  <span class="comment">// Includes request_id and user_id</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Clear context</span></div>
<div class="line">logger-&gt;clear_context();</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md157"></a>
Performance Monitoring</h2>
<div class="fragment"><div class="line"><span class="comment">// Enable performance metrics</span></div>
<div class="line"><span class="keyword">auto</span> monitor = logger-&gt;get_monitor();</div>
<div class="line">monitor-&gt;enable_metrics(<span class="keyword">true</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Log some messages</span></div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 1000; ++i) {</div>
<div class="line">    logger-&gt;info(<span class="stringliteral">&quot;Test message&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Get metrics</span></div>
<div class="line"><span class="keyword">auto</span> metrics = monitor-&gt;get_metrics();</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Messages logged: &quot;</span> &lt;&lt; metrics.total_messages &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Average latency: &quot;</span> &lt;&lt; metrics.average_latency_us &lt;&lt; <span class="stringliteral">&quot;Î¼s\n&quot;</span>;</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Dropped messages: &quot;</span> &lt;&lt; metrics.dropped_messages &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md158"></a>
Crash Safety</h2>
<div class="fragment"><div class="line"><span class="comment">// Install crash handler</span></div>
<div class="line">logger-&gt;install_crash_handler();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Configure emergency buffer</span></div>
<div class="line">logger-&gt;set_emergency_buffer_size(4096);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// On crash, emergency logs are written to stderr</span></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md159"></a>
Best Practices</h1>
<h2><a class="anchor" id="autotoc_md160"></a>
1. Use Appropriate Log Levels</h2>
<div class="fragment"><div class="line"><span class="comment">// TRACE: Detailed diagnostic information</span></div>
<div class="line">logger-&gt;trace(<span class="stringliteral">&quot;Entering function process_data()&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// DEBUG: Diagnostic information</span></div>
<div class="line">logger-&gt;debug(<span class="stringliteral">&quot;Processing item&quot;</span>, {{<span class="stringliteral">&quot;id&quot;</span>, item_id}});</div>
<div class="line"> </div>
<div class="line"><span class="comment">// INFO: General informational messages</span></div>
<div class="line">logger-&gt;info(<span class="stringliteral">&quot;Server started on port 8080&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// WARNING: Warning messages</span></div>
<div class="line">logger-&gt;warning(<span class="stringliteral">&quot;Connection pool near capacity&quot;</span>, {{<span class="stringliteral">&quot;usage&quot;</span>, 0.9}});</div>
<div class="line"> </div>
<div class="line"><span class="comment">// ERROR: Error events that might still allow continued operation</span></div>
<div class="line">logger-&gt;error(<span class="stringliteral">&quot;Failed to connect to database&quot;</span>, {{<span class="stringliteral">&quot;retry_count&quot;</span>, 3}});</div>
<div class="line"> </div>
<div class="line"><span class="comment">// CRITICAL: Critical events that require immediate attention</span></div>
<div class="line">logger-&gt;critical(<span class="stringliteral">&quot;Out of memory&quot;</span>, {{<span class="stringliteral">&quot;available&quot;</span>, 0}});</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md161"></a>
2. Structured Logging for Analytics</h2>
<div class="fragment"><div class="line"><span class="comment">// Good: Structured data for easy parsing</span></div>
<div class="line">logger-&gt;info(<span class="stringliteral">&quot;HTTP Request&quot;</span>, {</div>
<div class="line">    {<span class="stringliteral">&quot;method&quot;</span>, <span class="stringliteral">&quot;GET&quot;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;path&quot;</span>, <span class="stringliteral">&quot;/api/users&quot;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;status&quot;</span>, 200},</div>
<div class="line">    {<span class="stringliteral">&quot;duration_ms&quot;</span>, 45},</div>
<div class="line">    {<span class="stringliteral">&quot;client_ip&quot;</span>, <span class="stringliteral">&quot;192.168.1.1&quot;</span>}</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Avoid: Unstructured strings</span></div>
<div class="line">logger-&gt;info(<span class="stringliteral">&quot;GET /api/users 200 45ms from 192.168.1.1&quot;</span>);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md162"></a>
3. Performance Considerations</h2>
<div class="fragment"><div class="line"><span class="comment">// Use lazy evaluation for expensive operations</span></div>
<div class="line"><span class="keywordflow">if</span> (logger-&gt;should_log(log_level::debug)) {</div>
<div class="line">    <span class="keyword">auto</span> expensive_data = compute_expensive_debug_info();</div>
<div class="line">    logger-&gt;debug(<span class="stringliteral">&quot;Debug info&quot;</span>, {{<span class="stringliteral">&quot;data&quot;</span>, expensive_data}});</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Use batch writing for high-throughput scenarios</span></div>
<div class="line"><span class="keyword">auto</span> logger = logger_builder()</div>
<div class="line">    .with_batch_writing(<span class="keyword">true</span>)</div>
<div class="line">    .with_batch_size(1000)</div>
<div class="line">    .build();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Use async logging for I/O-bound applications</span></div>
<div class="line"><span class="keyword">auto</span> logger = logger_builder()</div>
<div class="line">    .with_async_mode(<span class="keyword">true</span>)</div>
<div class="line">    .with_queue_size(100000)</div>
<div class="line">    .build();</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md163"></a>
4. Error Handling</h2>
<div class="fragment"><div class="line"><span class="comment">// Check writer status</span></div>
<div class="line"><span class="keyword">auto</span> result = logger-&gt;add_writer(std::move(writer));</div>
<div class="line"><span class="keywordflow">if</span> (!result) {</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Failed to add writer: &quot;</span> &lt;&lt; result.error().message() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Handle logging failures gracefully</span></div>
<div class="line"><span class="keywordflow">try</span> {</div>
<div class="line">    logger-&gt;info(<span class="stringliteral">&quot;Message&quot;</span>);</div>
<div class="line">} <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line">    <span class="comment">// Fallback to stderr</span></div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Logging failed: &quot;</span> &lt;&lt; e.what() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md164"></a>
5. Resource Management</h2>
<div class="fragment"><div class="line"><span class="comment">// Properly shutdown logger</span></div>
<div class="line">logger-&gt;flush();  <span class="comment">// Ensure all messages are written</span></div>
<div class="line">logger-&gt;shutdown();  <span class="comment">// Clean shutdown</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Use RAII for automatic cleanup</span></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">auto</span> logger = create_logger();</div>
<div class="line">    <span class="comment">// Logger automatically cleaned up when out of scope</span></div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md165"></a>
Performance Optimization</h1>
<h2><a class="anchor" id="autotoc_md166"></a>
Memory Optimization</h2>
<div class="fragment"><div class="line"><span class="comment">// Enable Small String Optimization (SSO)</span></div>
<div class="line"><span class="keyword">auto</span> logger = logger_builder()</div>
<div class="line">    .with_sso_threshold(256)  <span class="comment">// Strings &lt; 256 bytes use stack allocation</span></div>
<div class="line">    .build();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Pre-allocate buffers</span></div>
<div class="line">logger-&gt;reserve_buffer(1024 * 1024);  <span class="comment">// 1MB buffer</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md167"></a>
Throughput Optimization</h2>
<div class="fragment"><div class="line"><span class="comment">// Use lock-free queue for high concurrency</span></div>
<div class="line"><span class="keyword">auto</span> logger = logger_builder()</div>
<div class="line">    .with_lock_free_queue(<span class="keyword">true</span>)</div>
<div class="line">    .build();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Batch writes to reduce syscalls</span></div>
<div class="line"><span class="keyword">auto</span> logger = logger_builder()</div>
<div class="line">    .with_batch_writing(<span class="keyword">true</span>)</div>
<div class="line">    .with_batch_size(500)</div>
<div class="line">    .with_flush_interval(std::chrono::milliseconds(100))</div>
<div class="line">    .build();</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md168"></a>
Latency Optimization</h2>
<div class="fragment"><div class="line"><span class="comment">// Use overflow policy to prevent blocking</span></div>
<div class="line"><span class="keyword">auto</span> logger = logger_builder()</div>
<div class="line">    .with_overflow_policy(overflow_policy::drop_oldest)</div>
<div class="line">    .with_queue_size(10000)</div>
<div class="line">    .build();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Disable features for minimal latency</span></div>
<div class="line"><span class="keyword">auto</span> logger = logger_builder()</div>
<div class="line">    .with_configuration_template(configuration_template::low_latency)</div>
<div class="line">    .build();</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md169"></a>
Migration Guide</h1>
<h2><a class="anchor" id="autotoc_md170"></a>
From Version 1.x to 2.x</h2>
<div class="fragment"><div class="line"><span class="comment">// Old API (1.x)</span></div>
<div class="line">logger-&gt;add_writer(<span class="keyword">new</span> file_writer(<span class="stringliteral">&quot;app.log&quot;</span>));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// New API (2.x)</span></div>
<div class="line"><span class="keyword">auto</span> result = logger-&gt;add_writer(std::make_unique&lt;file_writer&gt;(<span class="stringliteral">&quot;app.log&quot;</span>));</div>
<div class="line"><span class="keywordflow">if</span> (!result) {</div>
<div class="line">    <span class="comment">// Handle error</span></div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md171"></a>
From Other Logging Libraries</h2>
<h3><a class="anchor" id="autotoc_md172"></a>
From spdlog</h3>
<div class="fragment"><div class="line"><span class="comment">// spdlog</span></div>
<div class="line"><span class="keyword">auto</span> logger = spdlog::basic_logger_mt(<span class="stringliteral">&quot;my_logger&quot;</span>, <span class="stringliteral">&quot;logs/my_log.txt&quot;</span>);</div>
<div class="line">logger-&gt;info(<span class="stringliteral">&quot;Hello {}&quot;</span>, <span class="stringliteral">&quot;World&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Logger System</span></div>
<div class="line"><span class="keyword">auto</span> logger = logger_builder()</div>
<div class="line">    .with_file_writer(<span class="stringliteral">&quot;logs/my_log.txt&quot;</span>)</div>
<div class="line">    .build();</div>
<div class="line">logger-&gt;info(<span class="stringliteral">&quot;Hello World&quot;</span>);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md173"></a>
From Boost.Log</h3>
<div class="fragment"><div class="line"><span class="comment">// Boost.Log</span></div>
<div class="line">BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Hello World&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Logger System</span></div>
<div class="line">logger-&gt;info(<span class="stringliteral">&quot;Hello World&quot;</span>);</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md174"></a>
API Reference</h1>
<h2><a class="anchor" id="autotoc_md175"></a>
Enumerations</h2>
<div class="fragment"><div class="line"><span class="keyword">enum class</span> log_level {</div>
<div class="line">    trace = 0,</div>
<div class="line">    debug = 1,</div>
<div class="line">    info = 2,</div>
<div class="line">    warning = 3,</div>
<div class="line">    error = 4,</div>
<div class="line">    critical = 5</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum class</span> overflow_policy {</div>
<div class="line">    block,          <span class="comment">// Block until space available</span></div>
<div class="line">    drop_oldest,    <span class="comment">// Drop oldest messages</span></div>
<div class="line">    drop_newest     <span class="comment">// Drop new messages</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum class</span> rotation_policy {</div>
<div class="line">    size_based,     <span class="comment">// Rotate based on file size</span></div>
<div class="line">    time_based,     <span class="comment">// Rotate based on time</span></div>
<div class="line">    daily           <span class="comment">// Rotate daily</span></div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md176"></a>
Type Definitions</h2>
<div class="fragment"><div class="line"><span class="keyword">using </span>fields_type = std::unordered_map&lt;std::string, std::any&gt;;</div>
<div class="line"><span class="keyword">using </span>timestamp_type = std::chrono::system_clock::time_point;</div>
<div class="line"><span class="keyword">using </span>thread_id_type = std::thread::id;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md177"></a>
Error Handling</h2>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><span class="keyword">class </span>result {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keywordtype">bool</span> has_value() <span class="keyword">const</span>;</div>
<div class="line">    T&amp; value();</div>
<div class="line">    <span class="keyword">const</span> error&amp; error() <span class="keyword">const</span>;</div>
<div class="line">    <span class="keyword">operator</span> bool() <span class="keyword">const</span>;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>error {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    error_code code() <span class="keyword">const</span>;</div>
<div class="line">    std::string message() <span class="keyword">const</span>;</div>
<div class="line">};</div>
</div><!-- fragment --><hr  />
<p><em>For complete API reference, see the <a href="https://kcenon.github.io/logger_system/">Doxygen documentation</a>.</em> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Sep 10 2025 02:15:40 for Logger System by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
